import{w as j}from"./auth-ByqfQS__.js";import{u as g,r as n,j as e}from"./chunk-DQRVZFIR-iiQLzre3.js";import{u as y,N}from"./Navbar-DYZQvD6w.js";import{L as w}from"./Loader-DrVFdCe6.js";import{y as c}from"./index-KeYFdd6Z.js";import{C as v}from"./chevron-left-CjgRCe_o.js";import{c as l}from"./createLucideIcon-CV70i0aP.js";import"./authStore-Bl6YCSMu.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M5 12h14",key:"1ays0h"}]],k=l("minus",C);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],M=l("plus",_);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],I=l("trash-2",E),A=j(function(){const m=g(),{fetchCart:x,items:r,loading:h,updateQuantity:i,removeItem:p}=y(),[d,o]=n.useState({});n.useEffect(()=>{document.title="View Cart"},[]),n.useEffect(()=>{x()},[]),n.useEffect(()=>{console.log("CART ITEMS:",r)},[r]);const f=async(s,a)=>{o(t=>({...t,[s]:!0}));try{await i(s,a+1),c.success("Cart updated")}catch(t){c.dismiss(),c.error(t.message||"Failed to update cart")}finally{o(t=>({...t,[s]:!1}))}},b=async(s,a)=>{if(a>1){o(t=>({...t,[s]:!0}));try{await i(s,a-1),c.success("Cart updated")}catch(t){c.dismiss(),c.error(t.message||"Failed to update cart")}finally{o(t=>({...t,[s]:!1}))}}},u=r.reduce((s,a)=>s+a.product.price*a.quantity,0).toFixed(2);return r.reduce((s,a)=>s+a.quantity,0),h?e.jsx(w,{}):e.jsxs(e.Fragment,{children:[e.jsx(N,{}),r.length===0?e.jsx("p",{children:"Your cart is empty."}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:" p-6 bg-gray-100 h-[90vh]",children:[e.jsxs("button",{className:"flex pl-36 hover:text-blue-400 cursor-pointer",children:[e.jsx(v,{}),e.jsx("p",{className:"pb-5",onClick:()=>m(-1),children:"Go back"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center  gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 flex-1 max-w-3xl",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Cart (",r.length,")"]}),r.map(s=>e.jsxs("div",{className:"border-b pb-4 mb-4 last:border-b-0 last:pb-0 last:mb-0",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:s.product.productImage,alt:s.product.name,className:"w-20 h-20 object-contain"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.product.name}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("div",{className:"flex gap-2 items-center",children:e.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["$",s.product.price]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{disabled:d[s.product._id],className:"bg-blue-800 text-white p-1.5 rounded shadow disabled:bg-gray-400 cursor-pointer",onClick:()=>b(s.product._id,s.quantity),children:e.jsx(k,{size:16})}),e.jsx("span",{className:"px-2",children:s.quantity}),e.jsx("button",{disabled:d[s.product._id],className:"bg-blue-800 text-white p-1.5 rounded shadow disabled:bg-gray-400 cursor-pointer",onClick:()=>f(s.product._id,s.quantity),children:e.jsx(M,{size:16})})]})]})]})]}),e.jsxs("button",{className:"flex items-center gap-1 text-blue-700 mt-3 text-sm cursor-pointer",onClick:()=>p(s.product._id),children:[e.jsx(I,{size:16}),"Remove"]})]},s._id))]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 w-full md:w-80 h-fit",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"CART SUMMARY"}),e.jsxs("div",{className:"flex justify-between text-gray-700 font-medium mb-4",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",u]})]}),e.jsxs("div",{className:"flex justify-between text-gray-700 font-medium mb-4",children:[e.jsx("span",{children:"Number of items"}),e.jsx("span",{children:r.length})]}),e.jsxs("button",{className:"bg-blue-700 text-white w-full py-2 rounded shadow font-semibold hover:bg-blue-700 transition cursor-pointer",onClick:()=>alert("Proceeding to checkout..."),children:["Checkout ($",u,")"]})]})]})]})})]})});export{A as default};
