import{w as L}from"./auth-ByqfQS__.js";import{r as c,j as e}from"./chunk-DQRVZFIR-iiQLzre3.js";import{u as N}from"./shopStore-D8Lwzi_Z.js";import{u as R,a as U,d as B}from"./productStore-Bk9ZNgcz.js";import{y as r}from"./index-KeYFdd6Z.js";import{P as G}from"./Pagination-DfRlJhH3.js";import{A as I}from"./AdminRoute-DvLfaCzf.js";import{X as O}from"./x-DkeStzuR.js";import"./authStore-Bl6YCSMu.js";import"./chevron-left-CjgRCe_o.js";import"./createLucideIcon-CV70i0aP.js";import"./chevron-right-BL3J0d2p.js";import"./Loader-DrVFdCe6.js";const se=L(function(){c.useEffect(()=>{document.title="Stores"},[]);const[g,h]=c.useState(!1),[y,m]=c.useState(!1),[s,j]=c.useState(null),[b,f]=c.useState(""),[o,i]=c.useState({name:"",description:"",location:""}),[w,p]=c.useState(!1),[a,n]=c.useState({name:"",description:"",price:0,stock:0}),{shops:u,fetchSingleShop:S,fetchShops:d,loading:v,createShop:C,totalPages:k,total:P,page:D}=N(),{createProduct:A}=R(),F=u.length;c.useEffect(()=>{d()},[]);const E=async()=>{try{await C(o),r.success("Store created successfully"),h(!1),i({name:"",description:"",location:""})}catch(t){r.error(t.message||"Failed to create store")}},x=async t=>{try{await S(t);const l=N.getState().selectedShop;l?(j(l),f(l.name),m(!0)):r.error("Store not found")}catch(l){r.error(l.message||"Failed to fetch store")}},M=async()=>{if(s)try{await U(s._id,{name:b,description:s.description,location:s.location}),r.success("Store name updated"),d()}catch{r.error("Failed to update store")}},_=async()=>{if(s)try{await B(s._id),r.success("Store deleted"),m(!1),j(null),d()}catch{r.error("Failed to delete store")}},z=async()=>{if(s)try{const t={...a,storeId:s._id};await A(t),r.success("Product created"),p(!1),n({name:"",description:"",price:0,stock:0}),x(s._id)}catch(t){r.error(t.message||"Failed to create product")}};return e.jsx(I,{children:e.jsxs("main",{className:"w-[98%] ",children:[v?e.jsx("div",{className:"fixed inset-0 z-50 flex justify-center items-center ",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-blue-500 border-solid"})}):e.jsxs("section",{className:"w-[75vw]",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Stores"}),e.jsx("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 cursor-pointer",children:"+ Create Store"})]}),e.jsxs("table",{className:"w-full bg-white rounded shadow h-[80vh]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"p-3",children:"Name"}),e.jsx("th",{className:"p-3",children:"Description"}),e.jsx("th",{className:"p-3",children:"Location"}),e.jsx("th",{className:"p-3",children:"Date Created"}),e.jsx("th",{className:"p-3",children:"Actions"})]})}),e.jsx("tbody",{children:u.length>0?u.map((t,l)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 font-medium cursor-pointer",onClick:()=>x(t._id),children:t.name}),e.jsx("td",{className:"p-3",children:t.description}),e.jsx("td",{className:"p-3",children:t.location}),e.jsx("td",{className:"p-3",children:new Date(t.createdAt).toLocaleDateString("en-GB")}),e.jsx("td",{className:"p-3",children:e.jsx("button",{className:"text-sm text-blue-600 hover:underline cursor-pointer",onClick:()=>x(t._id),children:"Edit"})})]},l)):e.jsx("tr",{children:e.jsx("td",{className:"p-3 text-gray-500 italic text-center",colSpan:5,children:"No stores available."})})})]}),e.jsx(G,{itemsPerPage:F,total:P,totalPages:k,page:D,fetchProducts:d,itemName:"shops"})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-md w-[400px] space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Create Store"}),e.jsx("input",{className:"w-full border px-3 py-2 rounded",placeholder:"Store name",value:o.name,onChange:t=>i({...o,name:t.target.value})}),e.jsx("input",{className:"w-full border px-3 py-2 rounded",placeholder:"Description",value:o.description,onChange:t=>i({...o,description:t.target.value})}),e.jsx("input",{className:"w-full border px-3 py-2 rounded",placeholder:"Location",value:o.location,onChange:t=>i({...o,location:t.target.value})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-gray-800",children:"Cancel"}),e.jsx("button",{onClick:E,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 cursor-pointer",children:"Save"})]})]})}),y&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-md w-[80vw] space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:s.name}),e.jsx(O,{onClick:()=>m(!1),className:"cursor-pointer"})]}),e.jsx("p",{className:"text-gray-600",children:s.description}),e.jsxs("table",{className:"w-full bg-white rounded shadow h-[60vh]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100 text-left",children:[e.jsx("th",{className:"p-3",children:"Name"}),e.jsx("th",{className:"p-3",children:"Description"}),e.jsx("th",{className:"p-3",children:"Price"}),e.jsx("th",{className:"p-3",children:"Stock"})]})}),e.jsx("tbody",{children:Array.isArray(s.products)&&s.products.length>0?s.products.map((t,l)=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 font-medium",children:t.name}),e.jsx("td",{className:"p-3",children:t.description}),e.jsx("td",{className:"p-3",children:t.price}),e.jsx("td",{className:"p-3",children:t.stock})]},l)):e.jsx("tr",{children:e.jsx("td",{className:"p-3 text-gray-500 italic text-center",colSpan:5,children:"No products available."})})})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("input",{className:"border px-2 py-1 rounded w-full mr-2",placeholder:"Edit store name",value:b,onChange:t=>f(t.target.value)}),e.jsx("button",{onClick:M,className:"bg-yellow-500 text-white px-3 py-2 rounded hover:bg-yellow-600 cursor-pointer",children:"Update"})]}),e.jsxs("div",{className:"flex justify-between pt-2",children:[e.jsx("button",{onClick:()=>p(!0),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 cursor-pointer",children:"Add Product"}),e.jsx("button",{onClick:_,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 cursor-pointer",children:"Delete Store"})]})]})}),w&&s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-md w-[400px] space-y-4",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Add Product to ",s.name]}),e.jsx("label",{children:"Product Name:"}),e.jsx("input",{className:"w-full border px-3 py-2 rounded",value:a.name,onChange:t=>n({...a,name:t.target.value})}),e.jsx("label",{children:"Description:"}),e.jsx("input",{className:"w-full border px-3 py-2 rounded",value:a.description,onChange:t=>n({...a,description:t.target.value})}),e.jsx("label",{children:"Price:"}),e.jsx("input",{type:"number",className:"w-full border px-3 py-2 rounded",value:a.price,onChange:t=>n({...a,price:Number(t.target.value)})}),e.jsx("label",{children:"Stock:"}),e.jsx("input",{type:"number",className:"w-full border px-3 py-2 rounded",placeholder:"Stock",value:a.stock,onChange:t=>n({...a,stock:Number(t.target.value)})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-800 cursor-pointer",children:"Cancel"}),e.jsx("button",{onClick:z,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 cursor-pointer",children:"Save"})]})]})})]})})});export{se as default};
