import{u as v,b as w,w as P}from"./auth-ByqfQS__.js";import{r,u as C,j as e,N as L}from"./chunk-DQRVZFIR-iiQLzre3.js";import{u as g}from"./authStore-Bl6YCSMu.js";import{L as S}from"./Loader-DrVFdCe6.js";import{L as b}from"./logo-lY71twTc.js";import{y as a}from"./index-KeYFdd6Z.js";const E=()=>{r.useEffect(()=>{document.title="Dashboard"},[]);const l=C(),{fetchUser:o,user:t}=g(),[n,c]=r.useState(!1),[d,m]=r.useState((t==null?void 0:t.firstName)??""),[x,h]=r.useState((t==null?void 0:t.lastName)??""),[u,p]=r.useState((t==null?void 0:t.phone)??""),[k,i]=r.useState(!1),f=(t==null?void 0:t.email)??"",j=async()=>{i(!0);try{await w(),await o(),a.dismiss(),a.success("User successfully logged out"),l("/login",{replace:!0})}catch(s){a.dismiss(),a.error(s.message||"Something went wrong")}finally{i(!1)}},N=async()=>{if(n){i(!0);try{await v({firstName:d,lastName:x,phone:u}),await o(),a.dismiss(),a.success("Profile updated successfully"),c(!1)}catch(s){a.dismiss(),a.error(s.message||"Failed to update profile")}finally{i(!1)}}else c(!0)},y=()=>{c(!1),m((t==null?void 0:t.firstName)??""),h((t==null?void 0:t.lastName)??""),p((t==null?void 0:t.phone)??"")};return e.jsxs("div",{className:"bg-gradient-to-tl from-indigo-700 to-purple-500 h-[100vh] flex flex-col justify-center items-center gap-5",children:[e.jsxs("div",{className:"bg-white w-[70%] flex flex-col items-center justify-center rounded-xl h-[70%] ",children:[n?e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"flex",children:e.jsx("img",{src:b,alt:"",height:200,width:200})}),e.jsxs("span",{className:"flex flex-col space-y-1.5 pt-10",children:[e.jsx("input",{type:"text",value:d,onChange:s=>m(s.target.value),className:"text-2xl outline-none border-b-2 border-black text-blue-600 font-bold text-center",placeholder:"First Name"}),e.jsx("input",{type:"text",value:x,onChange:s=>h(s.target.value),className:"text-2xl outline-none border-b-2 border-black text-blue-600 font-bold text-center",placeholder:"Last Name"}),e.jsx("input",{className:"text-xl text-center outline-none border-b-2",type:"text",value:u,onChange:s=>p(s.target.value),placeholder:"Phone Number"})]}),e.jsx("p",{className:"pt-3 pb-8 text-gray-600",children:f})]}):e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:b,alt:"",height:200,width:200})}),e.jsxs("span",{className:"flex flex-col items-center space-y-1.5 pt-10",children:[e.jsxs("p",{className:"text-3xl text-blue-600 font-bold",children:[d," ",x]}),e.jsx("p",{className:"text-xl",children:u})]}),e.jsx("p",{className:"pt-3 pb-8 text-gray-600 text-center",children:f})]}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[n?e.jsx("button",{onClick:y,className:"px-4 py-1 border border-blue-500 hover:bg-blue-500 hover:text-white text-blue-500 rounded-xl cursor-pointer",children:"Cancel"}):"",e.jsx("button",{onClick:N,className:"px-4 py-1 border border-blue-500 hover:bg-blue-500 hover:text-white text-blue-500 rounded-xl cursor-pointer",children:n?"Submit Changes":"Edit"})]})]}),e.jsx("button",{onClick:j,className:"hover:bg-blue-500 hover:text-white bg-white text-blue-500 px-7 py-4 border border-blue-500 rounded-xl cursor-pointer",children:"LOGOUT"})]})};function U({children:l}){const{user:o,loading:t}=g();return t?e.jsx(S,{}):o?l:e.jsx(L,{to:"/login",replace:!0})}const I=P(function(){return e.jsx(U,{children:e.jsx(E,{})})});export{I as default};
