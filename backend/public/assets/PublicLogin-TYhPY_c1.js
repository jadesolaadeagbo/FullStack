import{l as w,g as y,w as b}from"./auth-ByqfQS__.js";import{j as e,N,r as i,u as v}from"./chunk-DQRVZFIR-iiQLzre3.js";import{u as g}from"./authStore-Bl6YCSMu.js";import{L}from"./Loader-DrVFdCe6.js";import{L as P}from"./logo-lY71twTc.js";import{L as S}from"./login-C8Y_XXD2.js";import{g as E}from"./google-Bk_u_M2e.js";import{y as t}from"./index-KeYFdd6Z.js";import{e as C,a as G}from"./eye-off-DSQ7H8ow.js";function k({children:a}){const{user:l,loading:o}=g();return o?e.jsx(L,{}):l?e.jsx(N,{to:"/userProfile",replace:!0}):a}const q=()=>{const[a,l]=i.useState(""),[o,m]=i.useState(""),[d,u]=i.useState(!1),[n,c]=i.useState(!1),x=v(),{fetchUser:p}=g();i.useEffect(()=>{document.title="Login"},[]);const h=a.trim()!==""&&o.trim()!=="",f=async s=>{if(s.preventDefault(),!h){t(""),t.error("Please fill in all required fields.");return}c(!0);try{const r=await w({email:a.trim(),password:o});if(!r)throw new Error((r==null?void 0:r.message)||"Login failed. Please try again.");await p(),t.dismiss(),t.success("Login successful!"),x("/shop"),l(""),m("")}catch(r){console.error("Login error:",r),t.dismiss(),t.error(r.message||"Something went wrong during login.")}finally{c(!1)}},j=async s=>{s.preventDefault();try{c(!0),await y()}catch(r){console.error("Google login error:",r),t.dismiss(),t.error("Something went wrong with Google login.")}finally{c(!1)}};return e.jsxs("div",{className:"px-[5%] sm:px-20 lg:px-32 py-20 lg:py-10 h-screen",children:[e.jsx("img",{src:P,alt:"logo",height:"30px",width:"30px"}),e.jsxs("div",{className:"flex items-center lg:items-start justify-center xl:justify-between",children:[e.jsxs("div",{className:"pt-10 sm:pt-40 md:pt-30",children:[e.jsx("h1",{className:"text-5xl font-bold pb-3.5",children:"Login"}),e.jsx("p",{className:"font-light text-gray-500",children:"Login to access your account"}),e.jsxs("form",{className:" w-[90vw] lg:w-[80vw] xl:w-[550px]",onSubmit:f,children:[e.jsx("div",{className:"flex flex-col pt-5",children:e.jsx("input",{type:"email",className:"border border-gray-500 rounded-sm h-10 px-2",placeholder:"Email",value:a,onChange:s=>l(s.target.value),required:!0})}),e.jsxs("div",{className:"relative flex flex-col pt-5",children:[e.jsx("input",{type:d?"text":"password",className:"border border-gray-500 rounded-sm h-10 px-2",placeholder:"Password",value:o,onChange:s=>m(s.target.value),required:!0}),e.jsx("span",{className:"absolute right-3 top-[40px] transform -translate-y-1/2 cursor-pointer text-gray-600",onClick:()=>u(s=>!s),children:e.jsx("img",{src:d?C:G,width:20})})]}),e.jsxs("div",{className:"flex justify-between items-center pt-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"checkbox",className:"cursor-pointer"}),e.jsx("p",{className:"text-sm",children:"Remember me"})]}),e.jsx("a",{href:"/forgotPassword",className:"text-sm text-red-500",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:n,className:`mt-10 w-full py-3 rounded-sm text-white 
                  ${n?"bg-blue-400":"bg-blue-600"}
                  ${n?"cursor-not-allowed":"cursor-pointer "}
                  transition-colors duration-200 ease-in-out`,children:n?"Logging in...":"Login"}),e.jsxs("div",{className:"text-center flex pt-5 justify-center",children:[e.jsx("span",{children:"Don't have an account? Â "}),e.jsx("a",{href:"/signup",className:"text-red-500",children:"Sign up"})]}),e.jsxs("div",{className:"flex items-center my-4",children:[e.jsx("div",{className:"flex-grow h-px bg-gray-300"}),e.jsx("span",{className:"mx-4 text-gray-500",children:"or"}),e.jsx("div",{className:"flex-grow h-px bg-gray-300"})]})]}),e.jsxs("button",{onClick:j,type:"button",className:"border cursor-pointer border-gray-400 py-2 w-full rounded-sm flex justify-center items-center gap-2",children:[e.jsx("img",{src:E,alt:"Google",height:20,width:20}),"Sign in with Google"]})]}),e.jsx("img",{src:S,alt:"login page",className:"pb-20 hidden xl:block",style:{height:"calc(100vh - 80px)"}})]})]})},z=b(function(){return e.jsx(k,{children:e.jsx(q,{})})});export{z as default};
