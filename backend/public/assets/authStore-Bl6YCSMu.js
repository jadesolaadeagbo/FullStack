import{c as d}from"./auth-ByqfQS__.js";import{R as i}from"./chunk-DQRVZFIR-iiQLzre3.js";const l=t=>{let e;const n=new Set,c=(s,u)=>{const o=typeof s=="function"?s(e):s;if(!Object.is(o,e)){const g=e;e=u??(typeof o!="object"||o===null)?o:Object.assign({},e,o),n.forEach(b=>b(e,g))}},r=()=>e,a={setState:c,getState:r,getInitialState:()=>f,subscribe:s=>(n.add(s),()=>n.delete(s))},f=e=t(c,r,a);return a},h=t=>t?l(t):l,m=t=>t;function y(t,e=m){const n=i.useSyncExternalStore(t.subscribe,()=>e(t.getState()),()=>e(t.getInitialState()));return i.useDebugValue(n),n}const S=t=>{const e=h(t),n=c=>y(e,c);return Object.assign(n,e),n},p=t=>t?S(t):S,O=p(t=>({user:null,loading:!0,setUser:e=>t({user:e}),fetchUser:async()=>{t({loading:!0});try{const e=await d();t({user:e})}catch(e){e.message!=="Unauthorized"&&console.error("Unexpected error fetching user:",e),t({user:null})}finally{t({loading:!1})}}}));export{p as c,O as u};
